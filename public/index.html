<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared Ledger Hub - Expense Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Shared Ledger Hub</h1>
            <p class="subtitle">Split expenses and track balances with your groups</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('users')">Users</button>
            <button class="tab-btn" onclick="showTab('groups')">Groups</button>
            <button class="tab-btn" onclick="showTab('expenses')">Expenses</button>
            <button class="tab-btn" onclick="showTab('balances')">Balances</button>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content active">
            <h2>Create New User</h2>
            <p class="helper-text">Start by creating user accounts for everyone who will participate in expense sharing.</p>
            <div class="form-group">
                <label>Display Name</label>
                <input type="text" id="userName" placeholder="e.g., John Doe" />
                
                <label>Contact Information</label>
                <input type="text" id="userContact" placeholder="Email or phone number" />
                
                <button onclick="createUser()">Create User</button>
            </div>
            
            <h3>All Users</h3>
            <p class="helper-text">View all registered users in the system.</p>
            <div id="usersList" class="list-container"></div>
        </div>

        <!-- Groups Tab -->
        <div id="groups-tab" class="tab-content">
            <h2>Create New Group</h2>
            <p class="helper-text">Groups allow multiple people to share and track expenses together (e.g., roommates, trip buddies).</p>
            <div class="form-group">
                <label>Group Name</label>
                <input type="text" id="groupName" placeholder="e.g., Weekend Trip, Apartment 4B" />
                
                <label>Description (Optional)</label>
                <input type="text" id="groupDesc" placeholder="Brief description of the group" />
                
                <label>Group Creator</label>
                <select id="groupCreator">
                    <option value="">Select who is creating this group</option>
                </select>
                
                <button onclick="createGroup()">Create Group</button>
            </div>
            
            <h3>View Your Groups</h3>
            <p class="helper-text">Select a user to see all groups they belong to.</p>
            <div class="form-group">
                <label>Select User</label>
                <select id="userForGroups" onchange="loadUserGroups()">
                    <option value="">Choose a user</option>
                </select>
            </div>
            <div id="groupsList" class="list-container"></div>
            
            <h3>Add Member to Group</h3>
            <p class="helper-text">Add existing users to any group to include them in expense sharing.</p>
            <div class="form-group">
                <label>Select Group</label>
                <select id="groupToAddMember">
                    <option value="">Choose a group</option>
                </select>
                
                <label>Select User to Add</label>
                <select id="userToAdd">
                    <option value="">Choose a user</option>
                </select>
                
                <button onclick="addMemberToGroup()">Add Member</button>
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses-tab" class="tab-content">
            <h2>Add New Expense</h2>
            <p class="helper-text">Record an expense and split it among group members. The system will calculate who owes what.</p>
            <div class="form-group">
                <label>Your Account</label>
                <select id="expenseUser" onchange="loadUserGroupsForExpenses()">
                    <option value="">Select your user account</option>
                </select>
                <small class="helper-text">This loads your groups in the next dropdown</small>
                
                <label>Group</label>
                <select id="expenseHub" onchange="updateSplitUI()">
                    <option value="">Select which group this expense is for</option>
                </select>
                
                <label>Expense Description</label>
                <input type="text" id="expenseTitle" placeholder="e.g., Groceries, Dinner, Gas" />
                
                <label>Total Amount</label>
                <input type="number" id="expenseAmount" placeholder="0.00" step="0.01" />
                
                <label>Who Paid?</label>
                <select id="expensePayer">
                    <option value="">Select who paid for this expense</option>
                </select>
                
                <label>How to Split</label>
                <select id="splitMethod" onchange="updateSplitUI()">
                    <option value="equal">Equal Split - Divide evenly among selected people</option>
                    <option value="exact">Exact Amounts - Specify exact amounts per person</option>
                    <option value="percentage">Percentage Split - Specify percentage per person</option>
                </select>
                
                <div id="splitDetails"></div>
                <button onclick="addExpense()">Add Expense</button>
            </div>
            
            <h3>View Expenses</h3>
            <p class="helper-text">Browse all expenses recorded for a specific group.</p>
            <div class="form-group">
                <label>Select Group</label>
                <select id="hubForExpenses" onchange="loadHubExpenses()">
                    <option value="">Choose a group to view expenses</option>
                </select>
            </div>
            <div id="expensesList" class="list-container"></div>
        </div>

        <!-- Balances Tab -->
        <div id="balances-tab" class="tab-content">
            <h2>View Balances</h2>
            <p class="helper-text">See who owes whom in a group. The system calculates this based on all recorded expenses.</p>
            <div class="form-group">
                <label>Your Account</label>
                <select id="balanceUser" onchange="loadUserGroupsForBalances()">
                    <option value="">Select your user account</option>
                </select>
                <small class="helper-text">This loads your groups in the next dropdown</small>
                
                <label>Select Group</label>
                <select id="hubForBalances" onchange="loadBalances()">
                    <option value="">Choose a group to view balances</option>
                </select>
                
                <div class="balance-controls">
                    <label>
                        <input type="checkbox" id="simplifyBalances" onchange="loadBalances()" />
                        Show Simplified Balances (reduces number of transactions needed)
                    </label>
                </div>
            </div>
            <div id="balancesList" class="list-container"></div>
            
            <h3>Record a Settlement</h3>
            <p class="helper-text">When someone pays back their debt, record it here to update the balances.</p>
            <div class="form-group">
                <label>Group</label>
                <select id="settlementHub">
                    <option value="">Select which group this payment is for</option>
                </select>
                
                <label>Who is Paying</label>
                <select id="settlementPayer">
                    <option value="">Select the person paying back</option>
                </select>
                
                <label>Who is Receiving</label>
                <select id="settlementReceiver">
                    <option value="">Select the person receiving payment</option>
                </select>
                
                <label>Amount</label>
                <input type="number" id="settlementAmount" placeholder="0.00" step="0.01" />
                
                <button onclick="settleBalance()">Record Settlement</button>
            </div>
        </div>

        <div id="message" class="message"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
